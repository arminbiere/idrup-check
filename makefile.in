COMPILE=@COMPILE@
all: @TARGETS@
idrup-check: idrup-check.c makefile
	$(COMPILE) -o $@ $<
idrup-fuzz: idrup-fuzz.c makefile ../cadical/src/ccadical.h ../cadical/build/libcadical.a
	$(COMPILE) -o $@ -I../cadical/src $< ../cadical/build/libcadical.a -lstdc++ -lm
dots=$(wildcard *.dot)
pdfs:$(dots:.dot=.pdf)
.SUFFIXES: .dot .pdf
.dot.pdf:
	dot -Tpdf $< -o $@
clean:
	rm -f makefile idrup-check idrup-fuzz
	rm -f test/*log test/*err
	rm -f *.pdf
format:
	clang-format -i idrup-check.c
test: all
	./test/run.sh
.PHONY: all clean format pdf test
